$(function(){if(!window.pubCoursePopup){return}var e={sms:pubCoursePopup.smsUrl||"http://i.service.zhan.test/api/common/sendSmsGet",email:pubCoursePopup.emailUrl||"http://i.service.zhan.test/api/common/sendMailGet",saveClue:pubCoursePopup.clueUrl||"http://i.service.zhan.test/api/clue/first",register:pubCoursePopup.registerUrl||"http://i.service.zhan.test/api/register/fasterRegister",login:pubCoursePopup.loginUrl||"http://i.service.zhan.test/api/common/userFullLogin",setNickname:pubCoursePopup.setNicknameUrl||"http://i.service.zhan.test/api/common/addNick",orderPubCourse:pubCoursePopup.orderUrl||"http://www.zhan.test/zapi/articles/videosubscription.html"};var t=$('<style type="text/css">.z-pop-layer-wrap{display:none;position:fixed;z-index:100000;top:0;left:0;right:0;bottom:0}.z-pop-layer-bg{position:absolute;top:0;right:0;left:0;bottom:0;background-color:#fff;opacity:.5}.z-pop-layer-content{position:absolute;width:100%;top:20%}.pop-gray-border{border:5px solid #b2b2b2;width:412px}.pop-email-reg-wrap,.pop-login-wrap,.pop-mobile-reg-wrap{position:absolute;width:421px;left:50%;margin-left:-210px}.pop-public-order-wrap{display:block;position:absolute;width:450px;left:50%;margin-left:-250px}.pop-nickname-wrap{display:block;position:absolute;width:410px;left:50%;margin-left:-205px;padding-top:40px;padding-bottom:40px;}.close-order-public-pop{display:inline-block;float:right;cursor:pointer}.order-pop-input-box{position:relative;display:inline-block;height:40px;line-height:40px;border:1px solid #ccc;outline:0}.pop-vcode-input{border:0;outline:0;position:absolute;top:1px;left:5px;width:172px;height:36px;line-height:36px;z-index:1}.order-pop-vcode-btn{display:inline-block;height:40px;line-height:40px;border:1px solid #f71;outline:0;color:#f71}.pop-lj-order-btn{display:inline-block;width:130px;height:40px;line-height:40px;color:#fff;background-color:#5280e0;cursor:pointer}.pop-lj-order-btn:hover{background-color:#3b66c1}.vcode-input-wrap{width:183px;position:relative;border:1px solid #ccc;border-right:0;float:left;height:40px;text-align:left}.vcode-btn-wrap{width:83px;position:relative;border:1px solid #f71;float:left;height:40px;color:#f71}.pop-order-vcode-input{border:0;outline:0;height:32px;line-height:32px;position:relative;top:4px;width:160px;padding:0 7px}.pop-vcode-text{text-align:center;height:40px;line-height:40px}.sendSmsCodeBtn.can-re-get{cursor:pointer}.lj-mobile-reg-btn,.lj-email-reg-btn,.lj-login-btn{background-color:#f71;cursor:pointer}.lj-mobile-reg-btn:hover,.lj-email-reg-btn:hover,.lj-login-btn:hover{background-color:#f91}.third-auth-link>img{position:relative;top:0;margin-right:4px;display:inline-block;}.pop-content-wrap{background-color:#fff;}.in-counting{cursor:default !important;}.in-sending{cursor:default !important;}input{color:#000;}.my-placeholder{color:#aaa;}.popSetnickname{cursor:pointer;}.popSetnickname.inRequesting{cursor:default}</style>');var i=$('<div class="z-pop-layer-wrap"><div class="z-pop-layer-bg"></div><div class="z-pop-layer-content"><div class="pop-public-order-wrap pop-gray-border pop-content-wrap"><div style="height:50px;line-height:50px;padding:0 10px;font-size:22px;color:#fff;background-color:#5280e0;position:relative"><span>小站公开课订阅</span> <img src="/static/images/pop-close.png" class="closeOrderPopup" style="position:absolute;top:15px;right:8px;cursor:pointer"></div><div style="background-color:#fff;padding:37px 32px 33px 32px"><div style="position:relative;padding-left:50px;font-size:16px"><img style="position:absolute;left:0" src="/static/images/pop-play.png"><span style="color:#666">建议您留下手机联系方式，如有备考提醒与最新资料发布，</span><span style="color:#f71">我们会以短信的形式通知您！</span></div></div><div style="text-align:center;font-size:16px;color:#5280e0;margin-bottom:20px">请完善以下信息，便于我们为您推荐合适的视频</div><div style="text-align:center"><input type="text" style="width:266px;padding:0 7px;" class="order-pop-input-box orderMobileNum" placeholder="请输入您的手机号"></div><div style="text-align:center;margin-top:11px;position:relative;height:40px"><div style="width:266px;left:50%;margin-left:-133px;overflow:hidden;position:absolute;margin-top:11px;font-size:12px"><div class="vcode-input-wrap"><input class="pop-order-vcode-input orderSmsCode" type="text" placeholder="请输入手机验证码"></div><div class="vcode-btn-wrap sendSmsCodeBtn can-re-get"><div class="pop-vcode-text smsCodeText4Order">获取验证码</div></div></div></div><div style="text-align:center;margin-top:30px;padding-bottom:34px"><span class="pop-lj-order-btn ljOrderBtn">立即订阅</span></div></div><div class="pop-mobile-reg-wrap pop-gray-border pop-content-wrap"><div style="height:50px;line-height:50px;padding-left:10px;font-size:22px;color:#fff;background-color:#59616d;position:relative"><span style="color:#fff">手机注册 立即</span><span style="color:#f0a12a">参与小站视频评论</span><div style="position:absolute;top:0;right:0;width:25px;height:25px;background-color:#6e7481"><img src="/static/images/pop-close.png" class="closeMobileRegIcon" style="cursor:pointer;position:relative;top:6px;left:6px;width:13px"></div></div><div style="height:10px"></div><div style="overflow:hidden;margin-bottom:30px;padding-right:40px;font-size:12px"><span style="float:right"><span style="color:#999">已有账号，</span><span style="color:#f71;cursor:pointer" class="gotoLogin">登录&gt;&gt;</span></span></div><div style="overflow:hidden;margin-bottom:8px;padding-right:40px;font-size:12px"><div style="float:right;width:190px;height:40px;line-height:40px;border:1px solid #ccc;color:#999"><input class="regMobileInput" type="text" style="border:0;outline:0;width:188px;height:26px;line-height:26px;position:relative;top:0;padding:0 10px;" placeholder="请输入您的手机号"></div><div style="float:right;width:50px;height:40px;line-height:40px;text-align:center;border:1px solid #ccc;border-right:0;color:#999">0086</div><div style="float:right;width:80px;padding-right:8px;text-align:right;height:40px;line-height:40px;font-size:14px"><span style="color:#e02f2f;position:relative;top:3px">*</span>&nbsp;<span style="color:#666">手机号</span></div></div><div style="overflow:hidden;margin-bottom:13px;padding-right:40px;font-size:12px"><div style="float:right;width:240px"><span style="color:#999">或&nbsp;</span><span style="color:#f71;cursor:pointer" class="gotoEmailRegPop">使用邮箱注册</span></div></div><div style="overflow:hidden;margin-bottom:13px;padding-right:40px;font-size:12px"><div style="float:right;width:240px;height:40px;line-height:40px;border:1px solid #ccc;color:#999"><input class="regMobilePwdInput" type="password" style="border:0;outline:0;width:238px;height:26px;line-height:26px;position:relative;top:0;padding:0 10px;" placeholder="请设置您的密码"></div><div style="float:right;width:80px;padding-right:8px;text-align:right;height:40px;line-height:40px;font-size:14px"><span style="color:#e02f2f;position:relative;top:3px">*</span>&nbsp;<span style="color:#666">设置密码</span></div></div><div style="overflow:hidden;margin-bottom:30px;padding-right:40px;font-size:12px"><div style="float:right;width:120px;height:40px;line-height:40px;text-align:center;border:1px solid #f71;color:#f71;cursor:pointer" class="sendMobileRegSmsCode">免费获取短信激活码</div><div style="float:right;width:120px;height:40px;line-height:40px;border:1px solid #ccc;border-right:0;color:#999"><input class="regMobileCodeInput" type="text" style="border:0;outline:0;width:118px;height:26px;line-height:26px;position:relative;top:0;padding:0 10px;"></div><div style="float:right;width:80px;padding-right:8px;text-align:right;height:40px;line-height:40px;font-size:14px"><span style="color:#e02f2f;position:relative;top:3px">*</span>&nbsp;<span style="color:#666">激活码</span></div></div><div style="overflow:hidden;margin-bottom:40px;padding-right:40px"><div style="float:right;width:320px;font-size:20px;color:#fff;text-align:center;padding:12px 0" class="lj-mobile-reg-btn">立即注册</div></div></div><div class="pop-email-reg-wrap pop-gray-border pop-content-wrap"><div style="height:50px;line-height:50px;padding-left:10px;font-size:22px;color:#fff;background-color:#59616d;position:relative"><span style="color:#fff">邮箱注册 立即</span><span style="color:#f0a12a">参与小站视频评论</span><div style="position:absolute;top:0;right:0;width:25px;height:25px;background-color:#6e7481"><img src="/static/images/pop-close.png" class="closeEmailRegIcon" style="cursor:pointer;position:relative;top:6px;left:6px;width:13px"></div></div><div style="height:10px"></div><div style="overflow:hidden;margin-bottom:30px;padding-right:40px;font-size:12px"><span style="float:right"><span style="color:#999">已有账号，</span><span style="color:#f71;cursor:pointer" class="gotoLogin">登录&gt;&gt;</span></span></div><div style="overflow:hidden;margin-bottom:8px;padding-right:40px;font-size:12px"><div style="float:right;width:240px;height:40px;line-height:40px;border:1px solid #ccc;color:#999"><input class="regEmailInput" type="text" style="border:0;outline:0;width:238px;height:26px;line-height:26px;position:relative;top:0;padding:0 10px;" placeholder="请输入您的常用邮箱"></div><div style="float:right;width:80px;padding-right:8px;text-align:right;height:40px;line-height:40px;font-size:14px"><span style="color:#e02f2f;position:relative;top:3px">*</span>&nbsp;<span style="color:#666">邮箱地址</span></div></div><div style="overflow:hidden;margin-bottom:13px;padding-right:40px;font-size:12px"><div style="float:right;width:240px"><span style="color:#999">或&nbsp;</span><span style="color:#f71;cursor:pointer" class="gotoMobileRegPop">使用手机注册</span></div></div><div style="overflow:hidden;margin-bottom:13px;padding-right:40px;font-size:12px"><div style="float:right;width:240px;height:40px;line-height:40px;border:1px solid #ccc;color:#999"><input class="regEmailPwdInput" type="password" style="border:0;outline:0;width:238px;height:26px;line-height:26px;position:relative;top:0;padding:0 10px;" placeholder="请设置您的密码"></div><div style="float:right;width:80px;padding-right:8px;text-align:right;height:40px;line-height:40px;font-size:14px"><span style="color:#e02f2f;position:relative;top:3px">*</span>&nbsp;<span style="color:#666">设置密码</span></div></div><div style="overflow:hidden;margin-bottom:30px;padding-right:40px;font-size:12px"><div style="float:right;width:120px;height:40px;line-height:40px;text-align:center;border:1px solid #f71;color:#f71;cursor:pointer" class="sendEmailRegCode">免费获取激活码</div><div style="float:right;width:120px;height:40px;line-height:40px;border:1px solid #ccc;border-right:0;color:#999"><input class="regEmailCodeInput" type="text" style="border:0;outline:0;width:118px;height:26px;line-height:26px;position:relative;top:0;padding:0 10px;"></div><div style="float:right;width:80px;padding-right:8px;text-align:right;height:40px;line-height:40px;font-size:14px"><span style="color:#e02f2f;position:relative;top:3px">*</span>&nbsp;<span style="color:#666">激活码</span></div></div><div style="overflow:hidden;margin-bottom:40px;padding-right:40px"><div style="float:right;width:320px;font-size:20px;color:#fff;text-align:center;padding:12px 0" class="lj-email-reg-btn">立即注册</div></div></div><div class="pop-login-wrap pop-gray-border pop-content-wrap"><div style="height:50px;line-height:50px;padding:0 10px;font-size:22px;color:#fff;background-color:#59616d"><span style="color:#fff">登录小站</span><span style="color:#f0a12a">立享会员专属特权</span><div style="position:absolute;top:0;right:0;width:25px;height:25px;background-color:#6e7481"><img src="/static/images/pop-close.png" class="closeLoginIcon" style="cursor:pointer;position:relative;top:6px;left:6px;width:13px"></div></div><div style="height:40px"></div><div style="position:relative;padding-left:32px;width:322px;left:50%;margin-left:-161px;height:40px;line-height:40px;border:1px solid #ccc;margin-bottom:13px"><img src="/static/images/pop-input-name.png" style="position:absolute;top:9px;left:12px"> <input class="loginAccountInput" type="text" style="border:0;outline:0;width:238px;height:26px;line-height:26px;position:relative;top:0;padding:0 4px;" placeholder="请输入您的手机/邮箱"></div><div style="position:relative;padding-left:32px;width:322px;left:50%;margin-left:-161px;height:40px;line-height:40px;border:1px solid #ccc;margin-bottom:10px"><img src="/static/images/pop-input-lock.png" style="position:absolute;top:10px;left:12px"> <input class="loginPwdInput" type="password" style="border:0;outline:0;width:238px;height:26px;line-height:26px;position:relative;top:0;padding:0 4px;" placeholder="请输入您的密码"></div><div style="overflow:hidden;position:relative;width:322px;left:50%;margin-left:-161px;margin-bottom:32px;font-size:12px;color:#999"><input style="float:left;position:relative;top:-1px" type="checkbox" name="rememberLogin" id="rememberLoginCk"><label style="float:left" for="rememberLoginCk">&nbsp;记住登录状态</label><span style="float:right;color:#f71;cursor:pointer" class="gotoRegAccount">&nbsp;注册账号</span><a href="http://passport.zhan.com/Resetpwd/index.html" target="_blank"><span style="float:right;color:#999">忘记密码&nbsp;|</span></a></div><div style="position:relative;width:322px;left:50%;margin-left:-161px;height:40px;line-height:40px;font-size:20px;color:#fff;text-align:center;margin-bottom:20px" class="lj-login-btn">立即登录</div><div style="border-top:1px solid #e5e5e5;height:71px;line-height:71px;background-color:#f5f5f5;text-align:center;font-size:12px"><span style="color:#999">使用合作网站帐号登录：</span> <a class="third-auth-link" href="http://passport.zhan.com/UsersThridParty/login/type/qq.html?url"><img src="/static/images/pop-qq-auth.png"></a><a class="third-auth-link" href="http://passport.zhan.com/UsersThridParty/login/type/sina.html?url"><img style="margin-right:6px" src="/static/images/pop-weibo-auth.png"></a><a class="third-auth-link" href="http://passport.zhan.com/UsersThridParty/login/type/weixin.html?url"><img src="/static/images/pop-wechat-auth.png"></a></div></div><div class="pop-nickname-wrap pop-gray-border pop-content-wrap" style="width:410px;background-color:#fff"><img class="closeNicknameIcon" src="/static/images/qk-close2.png" style="position:absolute;top:8px;right:5px;cursor:pointer"><div style="text-align:center;color:#333;font-size:22px;margin-bottom:30px">完善昵称 立即参与小站评论</div><div style="text-align:center;height:32px;line-height:32px;margin-bottom:42px"><span style="color:#666;font-size:14px">您的昵称&nbsp;</span> <input class="nicknameInput" type="text" placeholder="快来给自己起一个昵称吧！" style="height:32px;line-height:32px;width:234px;border:1px solid #ccc;padding-left:8px;"></div><div style="text-align:center"><span class="popSetnickname" style="background-color:#f71;color:#fff;font-size:20px;padding:11px 110px;">确定并发表</span></div></div></div></div>');$("head").append(t);$("body").append(i);$("input, textarea").placeholder({customClass:"my-placeholder"});var o=/^0?1[3|4|5|7|8][0-9]\d{8}$/;var p=/^\d+$/;var r=/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;function n(e,t,i,o){$.ajax({url:e,type:"GET",dataType:"jsonp",timeout:6e3,jsonp:"callback",jsonpCallback:"apicallback",data:t,success:function(e){i&&i(e)},error:function(){o&&o()}})}function l(){var t=window.g_orderSubjectId;var i=window.g_orderCatId;var o=localStorage.getItem("popupMobile");if(t==="-000"){s(t);alert("订阅成功");u();return}$.post(e.orderPubCourse,{subjectId:t,catid:i,user_id:pubCoursePopup.userId,mobile:o}).done(function(e){if(true===e){a();s(t);alert("订阅成功");u()}else{alert(e||"订阅失败，请稍后再试")}$(".ljOrderBtn").removeClass("in-ordering")}).fail(function(){alert("订阅服务异常，请稍后再试");$(".ljOrderBtn").removeClass("in-ordering")})}function s(e){var t="orderedCourse"+e;localStorage.setItem(t,"true")}function a(){var e=window.g_orderCourseBtn;if(e.hasClass("orderCountBt1")){var t=e.parent().find(".orderedCount1")}else{t=e.parents(".right-video-partcon").find(".orderedCount")}var i=$.trim(t.text());if(i.length===0){return}var o=parseInt(i.replace(/,/g,""));++o;var o=d(o);t.text(o)}function d(e){return e&&(e.toString().indexOf(".")!=-1?e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(e,t){return t+","}):e.toString().replace(/(\d)(?=(\d{3}))/g,function(e,t){return t+","}))}function g(){clearInterval(window.ordderCodeInterval);var e=$(".sendSmsCodeBtn");e.removeClass("can-re-get");var t=$(".smsCodeText4Order");var i=60;t.text(i+"s");window.ordderCodeInterval=setInterval(function(){i--;t.text(i+"s");if(i===0){t.text("获取验证码");e.addClass("can-re-get");clearInterval(window.ordderCodeInterval)}},1e3)}function c(e){clearInterval(window.regInterval);e.addClass("in-counting");var t=60;e.text(t+"s");window.regInterval=setInterval(function(){t--;e.text(t+"s");if(t===0){e.text("免费获取短信激活码");e.removeClass("in-counting");clearInterval(window.regInterval)}},1e3)}$(".sendMobileRegSmsCode, .sendEmailRegCode").click(function(){var t=$(this);if(t.hasClass("in-counting")||t.hasClass("in-sending")){return}var i,p;if(t.hasClass("sendMobileRegSmsCode")){var l=$.trim($(".regMobileInput").val());if(!o.test(l)){alert("请输入有效的手机号码");return}i=e.sms;p={phone:l,type:2}}else{var s=$.trim($(".regEmailInput").val());if(!r.test(s)){alert("请输入有效的邮箱地址");return}i=e.email;p={email:s}}t.addClass("in-sending");n(i,p,function a(e){t.removeClass("in-sending");if(e.status===1){c(t)}else{alert(e.message)}},function d(){t.removeClass("in-sending");alert("服务异常，请稍后再试")})});$(".sendSmsCodeBtn").click(function(){var t=$(this);if(!t.hasClass("can-re-get")){return}var i=$.trim($(".orderMobileNum").val());if(!o.test(i)){alert("请输入有效的手机号码");return}n(e.sms,{phone:i,type:10},function(e){if(e.status===1){g()}else{alert(e.message)}},function(){alert("服务异常，请稍后再试")})});$(".ljOrderBtn").click(function(){var t=$(this);if(t.hasClass("in-ordering")){return}var i=$.trim($(".orderMobileNum").val());var r=$.trim($(".orderSmsCode").val());if(!o.test(i)){alert("请输入有效的手机号码");return}if(!p.test(r)){alert("请输入有效的验证码");return}t.addClass("in-ordering");n(e.saveClue,{phone:i,phone_code:r,source:"公开课"},function(e){if(e.status===1){localStorage.setItem("popupMobile",i);l()}else{alert(e.message);$(".ljOrderBtn").removeClass("in-ordering")}},function(){alert("服务异常，请稍后再试");$(".ljOrderBtn").removeClass("in-ordering")})});$(".orderPubCourseBtn").click(function(){window.g_orderSubjectId=$(this).data("subjectid")||"-000";window.g_orderCatId=$(this).data("catid")||"-111";window.g_orderCourseBtn=$(this);var e="orderedCourse"+window.g_orderSubjectId;if(localStorage.getItem(e)==="true"){alert("订阅成功");return}if(pubCoursePopup.userId||localStorage.getItem("popupMobile")){l()}else{x(".pop-public-order-wrap")}});function h(t,i){$.ajax({url:e.register,type:"GET",dataType:"jsonp",timeout:6e3,jsonp:"callback",jsonpCallback:"apicallback",data:t,success:function(e){i.removeClass("inRequesting");if(e.status===1){window.location.reload(true)}else{alert("注册失败\n"+e.message)}},error:function(){i.removeClass("inRequesting");alert("服务异常，请稍后再试")}})}$(".lj-mobile-reg-btn").click(function(){var e=$(this);if(e.hasClass("inRequesting")){return}var t=$.trim($(".regMobileInput").val());var i=$.trim($(".regMobilePwdInput").val());var r=$.trim($(".regMobileCodeInput").val());if(!o.test(t)){alert("请输入有效的手机号码");return}if(i.length<8||i.length>20){alert("密码需要在8至20个字符内");return}if(!p.test(r)){alert("请输入有效的验证码");return}e.addClass("inRequesting");h({type:1,mobile:t,pwd:i,code:r,login:1},e)});$(".lj-email-reg-btn").click(function(){var e=$(this);if(e.hasClass("inRequesting")){return}var t=$.trim($(".regEmailInput").val());var i=$.trim($(".regEmailPwdInput").val());var o=$.trim($(".regEmailCodeInput").val());if(!r.test(t)){alert("请输入有效的邮箱地址");return}if(i.length<8||i.length>20){alert("密码需要在8至20个字符内");return}if(!p.test(o)){alert("请输入有效的验证码");return}e.addClass("inRequesting");h({type:2,email:t,pwd:i,code:o,login:1},e)});$(".lj-login-btn").click(function(){var t=$.trim($(".loginAccountInput").val());var i=$.trim($(".loginPwdInput").val());if(t.length===0){alert("请输入用户账号");return}if(i.length===0){alert("请输入密码");return}n(e.login,{username:t,password:i},function(e){if(e.status===1){window.location.reload(true)}else{alert(e.message)}},function(){alert("服务异常，请稍后再试")})});$(".popSetnickname").click(function(){var t=$(this);if(t.hasClass("inRequesting"))return;var i=$.trim($(".nicknameInput").val());if(i.length===0){alert("请输入昵称");return}t.addClass("inRequesting");n(e.setNickname,{nickname:i},function(e){t.removeClass("inRequesting");if(e.status===1){window.g_setNicknameDone()}else{alert(e.message)}},function(){t.removeClass("inRequesting");alert("设置昵称服务异常，请稍后再试")})});$(".gotoRegPop, .gotoRegAccount, .gotoMobileRegPop").click(function(){x(".pop-mobile-reg-wrap")});$(".gotoLoginPop, .gotoLogin").click(function(){x(".pop-login-wrap")});$(".gotoEmailRegPop").click(function(){x(".pop-email-reg-wrap")});window.showNicknamePop=function(e){x(".pop-nickname-wrap");window.g_setNicknameDone=e};window.hideNicknamePop=function(){u()};function x(e){$(".pop-content-wrap").hide();$(".z-pop-layer-wrap").show();$(".z-pop-layer-wrap input[type=text]").val("");$(".z-pop-layer-wrap input[type=password]").val("");$(e).show()}function u(){$(".z-pop-layer-wrap").hide()}$(".closeOrderPopup,.closeMobileRegIcon,.closeEmailRegIcon,.closeLoginIcon,.closeNicknameIcon").click(function(){u()})});
//# sourceMappingURL=order-pubcourse.min.js.map